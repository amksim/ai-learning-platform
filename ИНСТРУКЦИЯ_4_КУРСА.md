# 🎓 ИНСТРУКЦИЯ: СИСТЕМА 4 КУРСОВ

## 📋 **ЧТО СДЕЛАНО:**

✅ **Переключатель курсов** на `/courses`  
✅ **Селектор курса** в админке `/admin`  
✅ **Автосчётчик уроков** для каждого курса  
✅ **Бесплатные/платные** уроки в каждом курсе  
✅ **4 курса** с красивыми градиентами

---

## 🎯 **4 КУРСА:**

1. **🌐 Сайты** (синий) - Создавай сайты из чистого кода
2. **📱 Приложения** (фиолетовый) - Мобильные и десктопные приложения
3. **🎮 Игры** (оранжевый) - 2D и 3D игры
4. **💳 Платёжные системы** (зелёный) - Stripe, PayPal и другие

---

## 🚀 **БЫСТРАЯ НАСТРОЙКА (5 МИНУТ):**

### **ШАГ 1: Настрой базу данных** ⚡

1. Открой **Supabase Dashboard**
2. Зайди в **SQL Editor**
3. Открой файл `CLEAR_ALL_AND_SETUP.sql`
4. **Скопируй ВЕСЬ файл**
5. **Вставь в SQL Editor**
6. Нажми **▶️ Run**

**✅ Результат:**
```
✅ Все старые уроки удалены
✅ 4 курса созданы
✅ Счётчики настроены
✅ Нумерация с 1
```

---

### **ШАГ 2: Проверь что всё работает** 🔍

Открой **SQL Editor** и выполни:

```sql
-- Проверить курсы
SELECT id, slug, title, icon, total_lessons 
FROM course_categories 
ORDER BY display_order;
```

**Должно показать:**
```
id | slug     | title             | icon | total_lessons
1  | websites | Сайты             | 🌐   | 0
2  | apps     | Приложения        | 📱   | 0
3  | games    | Игры              | 🎮   | 0
4  | payments | Платёжные системы | 💳   | 0
```

---

### **ШАГ 3: Добавь уроки через админку** 📝

1. Зайди на **`/admin`**
2. Нажми **"Добавить урок"**
3. Заполни форму:

#### **Обязательные поля:**
- ✅ **Название** - например "Создаём первый сайт"
- ✅ **Описание** - подробное описание урока
- ✅ **Курс** - выбери один из 4 курсов (🌐 📱 🎮 💳)

#### **Дополнительные поля:**
- **Сложность** - Начальный/Средний/Продвинутый
- **Категория** - Foundation/HTML/CSS/JavaScript и т.д.
- **Иконка** - выбери красивую иконку
- **Бесплатный урок** - галочка (✅ = бесплатный, ❌ = платный)
- **Картинки** - загрузи изображения (опционально)
- **Видео** - добавь видео (опционально)

4. **Нажми "Сохранить"** ✅

---

### **ШАГ 4: Проверь на сайте** 🎉

1. Зайди на **`/courses`**
2. Увидишь **4 карточки курсов сверху**
3. Нажми на любой курс
4. Внизу покажутся **уроки этого курса**

---

## 🎨 **КАК ЭТО ВЫГЛЯДИТ:**

### **Страница `/courses`:**

```
┌─────────────────────────────────────────────┐
│  ВЫБЕРИ КУРС 🎓                             │
├─────────────────────────────────────────────┤
│                                             │
│  [🌐 Сайты]  [📱 Приложения]              │
│   12 уроков    0 уроков                     │
│                                             │
│  [🎮 Игры]    [💳 Платёжные системы]       │
│   0 уроков     0 уроков                     │
│                                             │
├─────────────────────────────────────────────┤
│  УРОКИ КУРСА "САЙТЫ":                       │
│                                             │
│  ○──○──○──○  (12 уроков волной)            │
│                                             │
└─────────────────────────────────────────────┘
```

### **Админка `/admin`:**

```
┌─────────────────────────────────────────────┐
│  [+ Добавить урок]                          │
├─────────────────────────────────────────────┤
│  Название: [_________________________]      │
│  Описание: [_________________________]      │
│  Курс:     [🌐 Сайты              ▼]        │
│            [📱 Приложения          ]        │
│            [🎮 Игры                ]        │
│            [💳 Платёжные системы   ]        │
│  Бесплатный: [✓]                           │
│                                             │
│  [Сохранить]                               │
└─────────────────────────────────────────────┘
```

---

## ⚙️ **КАК ЭТО РАБОТАЕТ:**

### **1. Переключатель курсов:**
```typescript
// Когда нажимаешь на курс:
onCategoryChange(category) → 
  → Фильтрует уроки по category.id
  → Показывает только уроки этого курса
```

### **2. Автосчётчик уроков:**
```sql
-- После INSERT/UPDATE/DELETE урока:
Триггер → 
  → Считает уроки в этом курсе
  → Обновляет total_lessons автоматически
```

### **3. Бесплатные/платные:**
```typescript
// В админке ставишь галочку "Бесплатный":
is_free = true  → Урок доступен всем
is_free = false → Урок доступен после оплаты
```

---

## 📊 **ПРИМЕР: ДОБАВИТЬ 3 УРОКА В "САЙТЫ":**

### **Урок 1: "Первый HTML сайт"**
```
Название:   Первый HTML сайт
Описание:   Создаём простой сайт из HTML
Курс:       🌐 Сайты
Сложность:  Начальный
Бесплатный: ✅
```

### **Урок 2: "Стили с CSS"**
```
Название:   Стили с CSS
Описание:   Добавляем красоту с помощью CSS
Курс:       🌐 Сайты
Сложность:  Начальный
Бесплатный: ✅
```

### **Урок 3: "Интерактив с JavaScript"**
```
Название:   Интерактив с JavaScript
Описание:   Добавляем кнопки и анимации
Курс:       🌐 Сайты
Сложность:  Средний
Бесплатный: ❌ (платный)
```

**Результат на `/courses`:**
```
🌐 Сайты - 3 урока
   ↓
○──○──🔒  (2 бесплатных + 1 платный)
```

---

## 🎯 **РЕКОМЕНДАЦИИ:**

### **Сколько уроков делать бесплатными?**
- **🌐 Сайты:** 2-3 бесплатных, остальные платные
- **📱 Приложения:** 1-2 бесплатных, остальные платные
- **🎮 Игры:** 1-2 бесплатных, остальные платные
- **💳 Платёжные системы:** 1 бесплатный, остальные платные

### **Порядок уроков:**
1. Бесплатные в начале (чтобы зацепить)
2. Платные дальше (после интереса)
3. Сложность растёт постепенно

---

## 🔧 **ЕСЛИ ЧТО-ТО НЕ РАБОТАЕТ:**

### **Проблема: Курсы не показываются**
```sql
-- Проверь в Supabase:
SELECT * FROM course_categories;
```
Если пусто → запусти `CLEAR_ALL_AND_SETUP.sql` снова

### **Проблема: Уроки не показываются**
```sql
-- Проверь уроки:
SELECT id, title, course_category_id FROM courses;
```
Если `course_category_id` = NULL → выбери курс в админке и сохрани

### **Проблема: Счётчик не обновляется**
```sql
-- Проверь триггер:
SELECT * FROM pg_trigger WHERE tgname = 'update_lesson_count_trigger';
```
Если пусто → запусти `CLEAR_ALL_AND_SETUP.sql` снова

---

## 📈 **СЛЕДУЮЩИЕ ШАГИ:**

1. ✅ **Настроить БД** (CLEAR_ALL_AND_SETUP.sql)
2. ✅ **Добавить уроки** через `/admin`
3. ✅ **Проверить** на `/courses`
4. 📝 **Добавить контент** (тексты, видео, картинки)
5. 🎨 **Настроить статистику** (страницы текста, минуты видео)

---

## 🎉 **ВСЁ ГОТОВО!**

Теперь у тебя:
- ✅ **4 курса** с переключателем
- ✅ **Админка** с выбором курса
- ✅ **Автосчётчик** уроков
- ✅ **Бесплатные/платные** уроки
- ✅ **Красивый дизайн** с градиентами

**НАЧИНАЙ ДОБАВЛЯТЬ УРОКИ!** 🚀
