# üî• –ù–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò - –ò–ù–°–¢–†–£–ö–¶–ò–Ø

## ‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û:

### 1. **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω AuthContext**
   - ‚úÖ –£–±—Ä–∞–Ω–∞ –≤—Å—è —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞
   - ‚úÖ –ù–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
   - ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –ª–∏–Ω–µ–π–Ω—ã–π –∫–æ–¥
   - ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `setLoading(false)`

### 2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
   ```
   contexts/
   ‚îú‚îÄ‚îÄ AuthContext.tsx     ‚Üê –ù–û–í–ê–Ø –ü–†–û–°–¢–ê–Ø –í–ï–†–°–ò–Ø
   ‚îî‚îÄ‚îÄ AuthContext.OLD.tsx ‚Üê –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (backup)
   ```

### 3. **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
   ```
   –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:
   1. supabase.auth.signUp() - —Å–æ–∑–¥–∞–Ω–∏–µ auth –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ profiles
   3. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ users (–¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã)
   4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥
   5. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   
   –í—Ö–æ–¥:
   1. supabase.auth.signInWithPassword()
   2. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   
   –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (loadUser):
   1. supabase.auth.getUser() - –ø–æ–ª—É—á–∏—Ç—å auth –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   2. –ó–∞–≥—Ä—É–∑–∏—Ç—å profile –∏–∑ –ë–î
   3. –ó–∞–≥—Ä—É–∑–∏—Ç—å progress –∏–∑ –ë–î
   4. setUser() - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   5. setLoading(false) - –í–°–ï–ì–î–ê –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
   ```

---

## üìã –ß–¢–û –ü–†–û–í–ï–†–ò–¢–¨ –í –ë–ê–ó–ï –î–ê–ù–ù–´–•:

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –í Supabase Dashboard**

1. –ó–∞–π–¥–∏ –≤ **Supabase Dashboard** ‚Üí **SQL Editor**
2. –°–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `CHECK_AUTH_DATABASE.sql`
3. –í—ã–ø–æ–ª–Ω–∏ SQL –∑–∞–ø—Ä–æ—Å—ã
4. –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
   - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `profiles` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `users` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - ‚úÖ –¢–≤–æ–π email `kmak4551@gmail.com` –µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ
   - ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –∫–æ–¥**

–ü—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–æ–±—É–π –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –Ω–æ–≤—ã–º email. –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - –≤—Å—ë –û–ö!

---

## üîß –ï–°–õ–ò –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

### **–ü—Ä–æ–±–ª–µ–º–∞ #1: "–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è"**

**–ü—Ä–∏—á–∏–Ω–∞:** RLS –ø–æ–ª–∏—Ç–∏–∫–∞ –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏ –≤ Supabase SQL Editor:
```sql
-- –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–∏—Ç–∏–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
DROP POLICY IF EXISTS "Enable insert for authenticated users" ON profiles;
CREATE POLICY "Enable insert for authenticated users" ON profiles
  FOR INSERT WITH CHECK (auth.uid() = id);

-- –¢–∞–∫–∂–µ –¥–ª—è users
DROP POLICY IF EXISTS "Enable insert for authenticated users" ON users;
CREATE POLICY "Enable insert for authenticated users" ON users
  FOR INSERT WITH CHECK (auth.uid() = id);
```

### **–ü—Ä–æ–±–ª–µ–º–∞ #2: "–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞"**

**–ü—Ä–∏—á–∏–Ω–∞:** `loadUser()` –Ω–µ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–æ–≤–µ—Ä—å:**
1. –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏:
   - `üîç –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...`
   - `‚úÖ Auth –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω: ...`
   - `‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω: ...`
   - `‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ`

3. –ï—Å–ª–∏ –≤–∏–¥–∏—à—å –æ—à–∏–±–∫—É:
   - –°–∫–æ–ø–∏—Ä—É–π —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
   - –ü–æ–∫–∞–∂–∏ –º–Ω–µ

### **–ü—Ä–æ–±–ª–µ–º–∞ #3: "–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å"**

**–ü—Ä–∏—á–∏–Ω–∞:** –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ø—Ä–æ–±—É–π –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ
2. –ò–ª–∏ —Å–±—Ä–æ—Å—å –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ Supabase Dashboard

---

## üéØ –ö–ê–ö –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨:

### **–¢–µ—Å—Ç 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**
1. –û—Ç–∫—Ä–æ–π `/login`
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Å—å –Ω–∞ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"
3. –í–≤–µ–¥–∏:
   - Email: `test@example.com`
   - –ü–∞—Ä–æ–ª—å: `test123456`
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: `test123456`
   - –ò–º—è: `Test User`
4. –ù–∞–∂–º–∏ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
5. –î–æ–ª–∂–Ω–æ –ø–µ—Ä–µ–±—Ä–æ—Å–∏—Ç—å –Ω–∞ `/courses`
6. –í –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å

### **–¢–µ—Å—Ç 2: –í—ã—Ö–æ–¥**
1. –ù–∞–∂–º–∏ –Ω–∞ –∞–≤–∞—Ç–∞—Ä ‚Üí "–í—ã–π—Ç–∏"
2. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏"

### **–¢–µ—Å—Ç 3: –í—Ö–æ–¥**
1. –ù–∞–∂–º–∏ "–í–æ–π—Ç–∏"
2. –í–≤–µ–¥–∏ email/–ø–∞—Ä–æ–ª—å –æ—Ç —Ç–µ—Å—Ç–∞ 1
3. –î–æ–ª–∂–µ–Ω –≤–æ–π—Ç–∏ –∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å

### **–¢–µ—Å—Ç 4: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**
1. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –Ω–∞–∂–º–∏ F5
2. –î–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–º
3. –ó–∞–≥—Ä—É–∑–∫–∞ ~1 —Å–µ–∫—É–Ω–¥–∞

---

## üìä –õ–û–ì–ò –í –ö–û–ù–°–û–õ–ò:

**–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
```
üîç –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...
‚úÖ Auth –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω: user@example.com
‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω: John Doe
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ
```

**–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
```
üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: test@example.com
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: abc-123-def
‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–Ω
‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω
üîç –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...
‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
```

**–ü—Ä–∏ –≤—Ö–æ–¥–µ:**
```
üîê –í—Ö–æ–¥: user@example.com
‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω
üîç –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...
```

---

## üöÄ –î–ï–ü–õ–û–ô:

–ö–æ–¥ —É–∂–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –∏ –∑–∞–ø—É—à–µ–Ω. Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç —á–µ—Ä–µ–∑ 2-3 –º–∏–Ω—É—Ç—ã.

**–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å:**
1. –ó–∞–π–¥–∏ –Ω–∞ Netlify Dashboard
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π deploy
3. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞—Ç—É—Å "Published"

---

## ‚ùì –ï–°–õ–ò –í–°–Å –ï–©–Å –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

1. **–û—á–∏—Å—Ç–∏ localStorage:**
   ```javascript
   // –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
   localStorage.clear();
   location.reload();
   ```

2. **–û—Ç–∫—Ä–æ–π –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ:**
   - –ù–∞–∂–º–∏ Ctrl+Shift+N (Chrome) –∏–ª–∏ Cmd+Shift+N (Mac)
   - –ó–∞–π–¥–∏ –Ω–∞ —Å–∞–π—Ç
   - –ü–æ–ø—Ä–æ–±—É–π –≤–æ–π—Ç–∏

3. **–ü—Ä–æ–≤–µ—Ä—å Supabase URL –∏ API Key:**
   - –û—Ç–∫—Ä–æ–π `.env.local`
   - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `NEXT_PUBLIC_SUPABASE_URL` –∏ `NEXT_PUBLIC_SUPABASE_ANON_KEY` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

4. **–ü–æ–∫–∞–∂–∏ –º–Ω–µ –ª–æ–≥–∏:**
   - –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å (F12)
   - –ü–æ–ø—Ä–æ–±—É–π –≤–æ–π—Ç–∏
   - –°–∫–æ–ø–∏—Ä—É–π –≤—Å–µ –ª–æ–≥–∏
   - –û—Ç–ø—Ä–∞–≤—å –º–Ω–µ

---

## üìù –°–¢–†–£–ö–¢–£–†–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•:

### **–¢–∞–±–ª–∏—Ü–∞: profiles**
```sql
id                    UUID (PRIMARY KEY)
email                 TEXT (UNIQUE)
full_name             TEXT
telegram_username     TEXT
subscription_status   TEXT (free/premium)
subscription_end_date TIMESTAMPTZ
stripe_customer_id    TEXT
created_at            TIMESTAMPTZ
updated_at            TIMESTAMPTZ
```

### **–¢–∞–±–ª–∏—Ü–∞: users** (–¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã)
```sql
id          UUID (PRIMARY KEY)
email       TEXT
full_name   TEXT
referred_by UUID
created_at  TIMESTAMPTZ
```

### **–¢–∞–±–ª–∏—Ü–∞: user_progress**
```sql
id             UUID (PRIMARY KEY)
user_id        UUID (FOREIGN KEY ‚Üí profiles.id)
course_slug    TEXT
lesson_index   INTEGER
completed      BOOLEAN
code_solution  TEXT
completed_at   TIMESTAMPTZ
created_at     TIMESTAMPTZ
updated_at     TIMESTAMPTZ
```

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –ß–ï–ö–õ–ò–°–¢:

- [ ] Deploy –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ –Ω–∞ Netlify
- [ ] –û—Ç–∫—Ä—ã–ª —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] –û—á–∏—Å—Ç–∏–ª localStorage
- [ ] –ü–æ–ø—Ä–æ–±–æ–≤–∞–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
- [ ] –í–∏–∂—É —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- [ ] –ú–æ–≥—É –≤—ã–π—Ç–∏
- [ ] –ú–æ–≥—É —Å–Ω–æ–≤–∞ –≤–æ–π—Ç–∏
- [ ] –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –æ—Å—Ç–∞—é—Å—å –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–º

**–ï–°–õ–ò –í–°–ï –ü–£–ù–ö–¢–´ ‚úÖ - –¢–û –í–°–Å –†–ê–ë–û–¢–ê–ï–¢!** üéâ

---

## üÜò –≠–ö–°–¢–†–ï–ù–ù–ê–Ø –ü–û–ú–û–©–¨:

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:
1. –°–∫–æ–ø–∏—Ä—É–π –≤—Å–µ –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
2. –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. –í—ã–ø–æ–ª–Ω–∏ SQL –∏–∑ `CHECK_AUTH_DATABASE.sql`
4. –û—Ç–ø—Ä–∞–≤—å –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–Ø –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è! üí™
