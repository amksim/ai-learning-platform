-- üóëÔ∏è –ë–ï–ó–û–ü–ê–°–ù–û–ï –£–î–ê–õ–ï–ù–ò–ï –°–¢–ê–†–´–• –ö–£–†–°–û–í
-- –£–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∫—É—Ä—Å—ã –ë–ï–ó –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Å—Ç–∞—Ä—ã–µ)
-- –û—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ –∫—É—Ä—Å—ã –° –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (—Ç–≤–æ–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É)

-- ‚ö†Ô∏è –°–ù–ê–ß–ê–õ–ê –ó–ê–ü–£–°–¢–ò CHECK_COURSES_BEFORE_DELETE.sql
-- –ò –£–ë–ï–î–ò–°–¨ –ß–¢–û –í–ò–î–ò–®–¨ –ü–†–ê–í–ò–õ–¨–ù–´–ï –ö–£–†–°–´!

-- ============================================
-- –í–ê–†–ò–ê–ù–¢ 1: –ü–û–ö–ê–ó–ê–¢–¨ –ß–¢–û –ë–£–î–ï–¢ –£–î–ê–õ–ï–ù–û (–ë–ï–ó –£–î–ê–õ–ï–ù–ò–Ø)
-- ============================================

-- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π —á—Ç–æ–±—ã –ü–û–°–ú–û–¢–†–ï–¢–¨ —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ:
/*
SELECT 
  id,
  title,
  '–ë–£–î–ï–¢ –£–î–ê–õ–Å–ù' as status,
  LENGTH(description) as desc_length,
  COALESCE(array_length(videos, 1), 0) as videos_count,
  COALESCE(array_length(images, 1), 0) as images_count
FROM courses
WHERE 
  -- –£—Å–ª–æ–≤–∏—è –¥–ª—è "—Å—Ç–∞—Ä—ã—Ö" –∫—É—Ä—Å–æ–≤:
  LENGTH(description) <= 100  -- –ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
  AND (array_length(videos, 1) IS NULL OR array_length(videos, 1) = 0)  -- –ù–µ—Ç –≤–∏–¥–µ–æ
  AND (array_length(images, 1) IS NULL OR array_length(images, 1) = 0)  -- –ù–µ—Ç –∫–∞—Ä—Ç–∏–Ω–æ–∫
ORDER BY id;
*/

-- ============================================
-- –í–ê–†–ò–ê–ù–¢ 2: –£–î–ê–õ–ò–¢–¨ –°–¢–ê–†–´–ï –ö–£–†–°–´ (–ë–ï–ó–û–ü–ê–°–ù–û)
-- ============================================

-- ‚ö†Ô∏è –†–ê–°–ö–û–ú–ú–ï–ù–¢–ò–†–£–ô –¢–û–õ–¨–ö–û –ü–û–°–õ–ï –ü–†–û–í–ï–†–ö–ò! ‚ö†Ô∏è
-- –£–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∫—É—Ä—Å—ã –±–µ–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

/*
DELETE FROM courses
WHERE 
  -- –£—Å–ª–æ–≤–∏—è –¥–ª—è "—Å—Ç–∞—Ä—ã—Ö" –∫—É—Ä—Å–æ–≤:
  LENGTH(description) <= 100  -- –ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
  AND (array_length(videos, 1) IS NULL OR array_length(videos, 1) = 0)  -- –ù–µ—Ç –≤–∏–¥–µ–æ
  AND (array_length(images, 1) IS NULL OR array_length(images, 1) = 0);  -- –ù–µ—Ç –∫–∞—Ä—Ç–∏–Ω–æ–∫
*/

-- ============================================
-- –í–ê–†–ò–ê–ù–¢ 3: –£–î–ê–õ–ò–¢–¨ –í–°–Å –ö–†–û–ú–ï –ö–û–ù–ö–†–ï–¢–ù–´–• ID
-- ============================================

-- –ï—Å–ª–∏ —Ç—ã –∑–Ω–∞–µ—à—å —Ç–æ—á–Ω—ã–µ ID —Å–≤–æ–∏—Ö 14 –∫—É—Ä—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç
-- –ó–∞–º–µ–Ω–∏ —Å–ø–∏—Å–æ–∫ ID –Ω–∞ —Å–≤–æ–∏ —Ä–µ–∞–ª—å–Ω—ã–µ ID

/*
DELETE FROM courses
WHERE id NOT IN (
  -- –ó–ê–ú–ï–ù–ò –≠–¢–ò ID –ù–ê –°–í–û–ò –†–ï–ê–õ–¨–ù–´–ï!
  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14
);
*/

-- ============================================
-- –ü–û–°–õ–ï –£–î–ê–õ–ï–ù–ò–Ø: –ü–†–û–í–ï–†–ö–ê
-- ============================================

-- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
/*
SELECT 
  '–û—Å—Ç–∞–ª–æ—Å—å –∫—É—Ä—Å–æ–≤' as info,
  COUNT(*) as count
FROM courses;

SELECT 
  id,
  title,
  '–û–°–¢–ê–õ–°–Ø' as status
FROM courses
ORDER BY id;
*/

-- ============================================
-- –ò–ù–°–¢–†–£–ö–¶–ò–Ø ‚úÖ
-- ============================================
-- 1. –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏ CHECK_COURSES_BEFORE_DELETE.sql
-- 2. –ü–æ—Å–º–æ—Ç—Ä–∏ –∫–∞–∫–∏–µ –∫—É—Ä—Å—ã "–•–û–†–û–®–ò–ï" (–æ—Å—Ç–∞–≤–∏—Ç—å)
-- 3. –ü–æ—Å–º–æ—Ç—Ä–∏ –∫–∞–∫–∏–µ –∫—É—Ä—Å—ã "–ü–£–°–¢–´–ï" (—É–¥–∞–ª–∏—Ç—å)
-- 4. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –í–ê–†–ò–ê–ù–¢ 1 —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ —É–¥–∞–ª–∏—Ç—Å—è
-- 5. –ï—Å–ª–∏ –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ - —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –í–ê–†–ò–ê–ù–¢ 2
-- 6. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –ø—Ä–æ–≤–µ—Ä–∫—É –≤ –∫–æ–Ω—Ü–µ
-- 
-- –ò–õ–ò –∏—Å–ø–æ–ª—å–∑—É–π –í–ê–†–ò–ê–ù–¢ 3 –µ—Å–ª–∏ –∑–Ω–∞–µ—à—å —Ç–æ—á–Ω—ã–µ ID
