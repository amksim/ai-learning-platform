-- üîç –ü–†–û–í–ï–†–ö–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ò –ö–£–†–°–û–í
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ –∫–æ–ª–æ–Ω–∫–∏ –∏ –∫–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –Ω–∏—Ö

-- ============================================
-- –®–ê–ì 1: –ü–†–û–í–ï–†–ò–¢–¨ –°–¢–†–£–ö–¢–£–†–£ –¢–ê–ë–õ–ò–¶–´
-- ============================================

SELECT column_name, data_type, is_nullable
FROM information_schema.columns
WHERE table_name = 'course_categories'
  AND column_name IN ('video_minutes', 'text_pages', 'practice_tasks')
ORDER BY column_name;

-- –ï—Å–ª–∏ –≤–µ—Ä–Ω—É–ª–æ—Å—å 3 —Å—Ç—Ä–æ–∫–∏ - –∫–æ–ª–æ–Ω–∫–∏ –ï–°–¢–¨ ‚úÖ
-- –ï—Å–ª–∏ –≤–µ—Ä–Ω—É–ª–æ—Å—å 0 —Å—Ç—Ä–æ–∫ - –∫–æ–ª–æ–Ω–∫–∏ –ù–ï–¢ ‚ùå (–Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å ADD_COURSE_STATS.sql)

-- ============================================
-- –®–ê–ì 2: –ü–†–û–í–ï–†–ò–¢–¨ –¢–ï–ö–£–©–ò–ï –ó–ù–ê–ß–ï–ù–ò–Ø
-- ============================================

SELECT 
  id,
  slug,
  title,
  icon,
  video_minutes,
  text_pages,
  practice_tasks,
  total_lessons,
  updated_at
FROM course_categories
ORDER BY display_order;

-- ============================================
-- –®–ê–ì 3: –ü–†–û–í–ï–†–ò–¢–¨ RLS –ü–û–õ–ò–¢–ò–ö–ò
-- ============================================

SELECT 
  schemaname,
  tablename,
  policyname,
  permissive,
  roles,
  cmd,
  qual,
  with_check
FROM pg_policies
WHERE tablename = 'course_categories';

-- –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∞ –Ω–∞ UPDATE –¥–ª—è –∞–¥–º–∏–Ω–∞

-- ============================================
-- –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:
-- ============================================

-- ‚ùå –ü–†–û–ë–õ–ï–ú–ê 1: –ö–æ–ª–æ–Ω–∫–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã
-- –†–ï–®–ï–ù–ò–ï: –ó–∞–ø—É—Å—Ç–∏ ADD_COURSE_STATS.sql

-- ‚ùå –ü–†–û–ë–õ–ï–ú–ê 2: RLS –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
-- –†–ï–®–ï–ù–ò–ï: –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É UPDATE –¥–ª—è –∞–¥–º–∏–Ω–∞

-- ‚ùå –ü–†–û–ë–õ–ï–ú–ê 3: –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
-- –†–ï–®–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SUPABASE_SERVICE_ROLE_KEY
